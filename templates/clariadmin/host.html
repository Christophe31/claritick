<?xml version='1.0' encoding='utf-8'?>
{% extends "base.html" %}
    {% block extrastyle %}
    {% endblock %}
{% block title %}{% if host %}Machine {{ host }}{% else %}Création d'une machine{% endif %}{% endblock %}
{% block content_title %}{% if host %}Machine {{ host }}{% else %}Création d'une machine{% endif %}{% endblock %}
{% block image %}<img src="/media/images/oxygen/folder-open.png" />{% endblock %}
{% block extrajs %}
<script type="text/javascript" src="{{ MEDIA_URL }}js/clariadmin.js"></script>
<script type="text/javascript" charset="utf-8">
    function typeChanged(select_box)
    {
        alert("need to load an ExtraFieldsFrom");
    }

function confirmation_callback(myBool, form_id){
    if(myBool){
        postwith(
        {delete:"true"},dojo.byId(form_id));
        }
}
</script>
{%endblock%}
{% block content %}

<form id="the_form" method="POST">
    {% csrf_token %}
    <fieldset style="float:left;">
        <legend>Machine</legend>
        <table class="search">
            {{ form }}
        </table>
    </fieldset>
    {% if additionnal_fields.fields %}
    <fieldset>
        <legend>Champs complémentaires</legend>
        <table class="search">
        {{ additionnal_fields }}
        </table>
    </fieldset>
    {% endif %}
    <hr />
    {%if host%}<button type="button" onclick='confirmDialog("Supression de l hote", "Êtes vous sûr de vouloir supprimer cette machine de la base?", confirmation_callback, "the_form")' value="true" dojoType="dijit.form.Button">Suprimer</button>{%endif%}
    <button type="submit" name="save" dojoType="dijit.form.Button">Modifier/Valider</button>
</form>
{% spaceless %}
{% if host %}
    {% load comments %}
    {% render_comment_form for host %}
    {% render_comment_list for host %}
{% endif %}
{% endspaceless %}
{% endblock %}
